<VirtualHost *:80>
    ServerName employeeos.tech
    ServerAlias www.employeeos.tech

    DocumentRoot /var/www/html

    # SPA Routing
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^ /index.html [L]

    # Cache Control
    <FilesMatch "\.(ico|css|js|gif|jpe?g|png|woff2|ttf|svg|eot|woff)$">
        Header set Cache-Control "max-age=2592000, public"
    </FilesMatch>

    # Prevent Access to Hidden Files
    <FilesMatch "^\.">
        Require all denied
    </FilesMatch>

    # Proxy Pass to Docker Container on Port 8080
    ProxyPreserveHost On
    ProxyPass "/" http://localhost:8080/
    ProxyPassReverse "/" http://localhost:8080/

    ErrorDocument 404 /index.html

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>

# Enable Required Apache Modules
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options "nosniff"
</IfModule>

<IfModule mod_rewrite.c>
    RewriteEngine On
</IfModule>

<IfModule mod_proxy.c>
    ProxyRequests Off
</IfModule>
